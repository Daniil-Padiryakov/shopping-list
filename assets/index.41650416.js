import{o as u,c,a as s,t as d,r as D,w as g,v as p,b as x,F as f,d as b,e as C,f as P,g as y,B as O,m as w,h as k,i as T,n as N,j as S}from"./vendor.4cdacd50.js";const L=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}};L();var m=(t,e)=>{for(const[a,n]of e)t[a]=n;return t};const j={props:{items:{type:Array}},computed:{getCurrentPurchasesAllCost(){let t=null;if(this.items.length===0)return 0;for(let e of this.items)t+=Number(e.cost);return t}}},M={class:"shadow stats mb-3"},A={class:"stat"},$=s("div",{class:"stat-title"},"All cost:",-1),E={class:"stat-value text-primary"};function I(t,e,a,n,r,l){return u(),c("div",M,[s("div",A,[$,s("div",E,d(l.getCurrentPurchasesAllCost),1)])])}var _=m(j,[["render",I]]);const B={components:{AllCostOfTable:_},props:{state:{type:Object},currentDate:{type:Object}},data(){return{newTitle:"",newCategory:"",newCost:null,newDate:{year:null,month:null,day:null},editPurchaseId:null,editPurchaseTitle:""}},methods:{addZeroToDate(t){return t>=0&&t<=9?"0"+t:t},getLastDay(t,e){return new Date(t,e+1,0).getDate()},prevDay(){this.currentDate.year=this.getPrevYear(this.currentDate.year,this.currentDate.month,this.currentDate.day),this.currentDate.day=this.getPrevDay(this.currentDate.day)},getPrevYear(t,e,a){return e==0&&a==1?t-1:t},getPrevMonth(t){return t==0?11:t-1},getPrevDay(t){return t==1?(this.currentDate.month=this.getPrevMonth(this.currentDate.month),this.getLastDayOfPrevMonth()):t-1},getLastDayOfPrevMonth(){return this.getLastDay(this.currentDate.year,this.currentDate.month)},getLastDayOfNextMonth(){return this.getLastDay(this.currentDate.year,this.currentDate.month)},nextDay(){this.currentDate.year=this.getNextYear(this.currentDate.year,this.currentDate.month,this.currentDate.day),this.currentDate.day=this.getNextDay(this.currentDate.day)},getNextYear(t,e,a){return e==11&&a==31?t+1:t},getNextMonth(t){return t==11?0:t+1},getNextDay(t){return t==this.getLastDayOfNextMonth()?(this.currentDate.month=this.getNextMonth(this.currentDate.month),1):t+1},addPurchase(){let t={id:this.state.nextPurchaseId++,title:this.newTitle,category:this.newCategory,cost:this.newCost,date:{year:this.currentDate.year,month:this.currentDate.month,day:this.currentDate.day},isEdited:!1};this.state.purchases.push(t),this.addNewCategory(),this.setDataToLC(this.state)},deletePurchase(t,e){e.stopPropagation();let a=this.state.purchases.indexOf(t);this.state.purchases.splice(a,1),this.setDataToLC(this.state)},editPurchase(t){console.log(t);let e=this.state.purchases.indexOf(t);this.state.purchases[e].isEdited=!0,this.editPurchaseTitle=this.state.purchases[e].title,this.editPurchaseId=e},editPurchaseDone(t){this.state.purchases[t].title=this.editPurchaseTitle,this.state.purchases[t].isEdited=!1,this.editPurchaseId=null,this.editPurchaseTitle="",this.setDataToLC(this.state)},addNewCategory(){!this.checkExistElemInArr(this.state.categories,this.newCategory)&&this.newCategory!=""&&(this.state.categories.push(this.newCategory),this.setDataToLC(this.state))},resetInputs(){this.newTitle="",this.newCategory="",this.newCost=null},checkExistElemInArr(t,e){let a=t.find(n=>n===e);return a!==void 0?a:void 0},setDataToLC(t){localStorage.setItem("stateOfShoppingList",JSON.stringify(t))}},computed:{getCurrentPurchases(){return this.state.purchases.filter(t=>JSON.stringify(t.date)===JSON.stringify(this.currentDate))},getCurrentDate(){return this.addZeroToDate(this.currentDate.day)+"."+this.addZeroToDate(this.currentDate.month+1)+"."+this.currentDate.year}}},F={class:""},V={class:"flex justify-center mb-2 p-3 shadow-lg bg-base-100 rounded-box"},U={class:"category"},J=["value"],Z={class:"flex justify-center mb-2"},R={class:"flex justify-center mb-4 p-3 shadow-lg bg-base-100 rounded-box"},W={class:"stat-value"},Y={class:"overflow-x-auto mb-3"},H={class:"table w-full"},K=s("thead",null,[s("tr",null,[s("th",null,"Title"),s("th",null,"Category"),s("th",null,"Price")])],-1),q=["onDblclick"],z=["onClick"];function G(t,e,a,n,r,l){const h=D("AllCostOfTable");return u(),c(f,null,[s("div",F,[s("div",V,[g(s("input",{class:"input input-bordered","onUpdate:modelValue":e[0]||(e[0]=i=>r.newTitle=i),type:"text",placeholder:"Title"},null,512),[[p,r.newTitle]]),s("div",U,[g(s("input",{class:"input input-bordered","onUpdate:modelValue":e[1]||(e[1]=i=>r.newCategory=i),type:"text",placeholder:"Category"},null,512),[[p,r.newCategory]]),g(s("select",{class:"select select-bordered max-w-full","onUpdate:modelValue":e[2]||(e[2]=i=>r.newCategory=i)},[(u(!0),c(f,null,b(a.state.categories,i=>(u(),c("option",{value:i},d(i),9,J))),256))],512),[[x,r.newCategory]])]),g(s("input",{class:"input input-bordered","onUpdate:modelValue":e[3]||(e[3]=i=>r.newCost=i),type:"text",placeholder:"Cost"},null,512),[[p,r.newCost]])]),s("div",Z,[s("button",{onClick:e[4]||(e[4]=(...i)=>l.addPurchase&&l.addPurchase(...i)),type:"button",class:"btn btn-success"},"Add purchase")]),s("div",R,[s("button",{onClick:e[5]||(e[5]=(...i)=>l.prevDay&&l.prevDay(...i)),type:"button",class:"btn btn-accent mr-3"},"Prev"),s("div",W,d(l.getCurrentDate),1),s("button",{onClick:e[6]||(e[6]=(...i)=>l.nextDay&&l.nextDay(...i)),type:"button",class:"btn btn-accent ml-3"},"Next")])]),s("div",Y,[s("table",H,[K,s("tbody",null,[(u(!0),c(f,null,b(l.getCurrentPurchases,i=>(u(),c("tr",null,[s("td",null,[i.isEdited?C("",!0):(u(),c("span",{key:0,onDblclick:o=>l.editPurchase(i)},d(i.title),41,q)),i.isEdited?g((u(),c("input",{key:1,class:"input input-bordered",onKeypress:e[7]||(e[7]=P(o=>l.editPurchaseDone(r.editPurchaseId),["enter"])),"onUpdate:modelValue":e[8]||(e[8]=o=>r.editPurchaseTitle=o),type:"text"},null,544)),[[p,r.editPurchaseTitle]]):C("",!0)]),s("td",null,d(i.category),1),s("td",null,d(i.cost),1),s("td",null,[s("button",{onClick:o=>l.deletePurchase(i,o),class:"btn btn-secondary btn-sm"},"Delete",8,z)])]))),256))])])]),y(h,{items:l.getCurrentPurchases},null,8,["items"])],64)}var Q=m(B,[["render",G]]);const X={extends:O,mixins:[w.reactiveProp],props:["options"],data(){},mounted(){this.renderChart(this.chartData,this.options)}},tt={class:"p-3 shadow-lg bg-base-100 rounded-box mb-3"},et={ref:"canvas"};function st(t,e,a,n,r,l){return u(),c("div",tt,[s("canvas",et,null,512)])}var v=m(X,[["render",st]]);const at={components:{Chart:v,AllCostOfTable:_},props:{state:{type:Object},currentDate:{type:Object}},data(){return{statisticsBeginDate:null,statisticsEndDate:null,objsDateOfStatistics:[],statisticsPurchases:[],datacollection:{}}},methods:{getStatisticsPurchasesHandler(){this.objsDateOfStatistics=[];for(let t of this.getObjsOfRangeDate()){let e={year:Number(t.split("-")[0]),month:this.removeZeroFromDate(t.split("-")[1])-1,day:Number(this.removeZeroFromDate(t.split("-")[2]))};this.objsDateOfStatistics.push(e)}this.statisticsPurchases=this.getStatisticsPurchases()},getRangeOfDate(t,e){let a=[];for(let n=new Date(t);n<=e;n.setDate(n.getDate()+1))a.push(new Date(n));return a},getStatisticsPurchases(){this.statisticsPurchases=null;let t=[];for(let e of this.objsDateOfStatistics)for(let a of this.state.purchases)JSON.stringify(a.date)==JSON.stringify(e)&&t.push(a);return t},getObjsOfRangeDate(){let t=this.getRangeOfDate(new Date(this.statisticsBeginDate),new Date(this.statisticsEndDate));return t=t.map(e=>e.toISOString().slice(0,10)),t},removeZeroFromDate(t){let e=t.split("");return e[0]==0&&e.splice(0,1),e.join("")},setDataDays(){this.datacollection={labels:this.range(1,this.getLastDayOfMonth(this.currentDate.year,this.currentDate.month)),datasets:[{label:"Data One",backgroundColor:"#f87979",data:this.getCostOfMonth().map(t=>t.summ)}]}},getCostOfMonth(){let t=this.rangeOfObjs(1,this.getLastDayOfMonth(this.currentDate.year,this.currentDate.month)),e=this.state.purchases.filter(a=>a.date.year==this.currentDate.year&&a.date.month==this.currentDate.month);for(let a of e)for(let n in t)t[n].index==a.date.day&&(t[n].summ+=Number(a.cost));return t},range(t,e){let a=[];for(let n=t;n<=e;n++)a.push(n);return a},rangeOfObjs(t,e){let a=[];for(let n=t;n<=e;n++)a.push({index:n,summ:null});return a},getLastDayOfMonth(t,e){var a=new Date(t,e+1,0);return a.getDate()},setDataWeeks(){this.datacollection={labels:this.range(1,this.chunk(this.getCostOfMonth(),7).length),datasets:[{label:"Data One",backgroundColor:"#f87979",data:this.getWeek()}]}},getWeek(){let t=this.chunk(this.getCostOfMonth(),7),e=[];for(let a of t){let n=0;for(let r of a)n+=r.summ;e.push(n)}return e},chunk(t,e){let a=[],n=Math.ceil(t.length/e);for(let r=0;r<n;r++){let l=t.splice(0,e);a.push(l)}return a},setDataMonths(){this.datacollection={labels:this.range(1,12),datasets:[{label:"Data One",backgroundColor:"#f87979",data:this.getMonths().map(t=>t.summ)}]}},getMonths(){let t=this.rangeOfObjs(0,11),e=this.state.purchases.filter(a=>a.date.year==this.currentDate.year);for(let a of e)for(let n in t)t[n].index==a.date.month&&(t[n].summ+=Number(a.cost));return t}},created(){this.setDataDays()}},rt={class:"flex justify-center mb-3 p-3 shadow-lg bg-base-100 rounded-box"},nt=s("label",{class:"label",for:"date-begin"},[s("span",{class:"label-text text-lg font-medium"},"Begin date")],-1),lt=s("label",{class:"label",for:"date-end"},[s("span",{class:"label-text text-lg font-medium"},"End date")],-1),it={class:"p-3 shadow-lg bg-base-100 rounded-box flex-grow mb-4"},ot={class:"overflow-x-auto mb-3"},ut={class:"table w-full table-compact"},ct=s("thead",null,[s("tr",null,[s("th",null,"Title"),s("th",null,"Category"),s("th",null,"Price")])],-1),ht={class:"tabs flex justify-center mb-3"};function dt(t,e,a,n,r,l){const h=D("AllCostOfTable"),i=D("Chart");return u(),c("div",null,[s("div",rt,[nt,g(s("input",{class:"input input-bordered","onUpdate:modelValue":e[0]||(e[0]=o=>r.statisticsBeginDate=o),type:"date",id:"date-begin"},null,512),[[p,r.statisticsBeginDate]]),lt,g(s("input",{class:"input input-bordered","onUpdate:modelValue":e[1]||(e[1]=o=>r.statisticsEndDate=o),type:"date",id:"date-end"},null,512),[[p,r.statisticsEndDate]]),s("button",{onClick:e[2]||(e[2]=(...o)=>l.getStatisticsPurchasesHandler&&l.getStatisticsPurchasesHandler(...o)),class:"btn btn-success self-center ml-3"},"Show ")]),s("div",it,[s("div",ot,[s("table",ut,[ct,s("tbody",null,[(u(!0),c(f,null,b(r.statisticsPurchases,o=>(u(),c("tr",null,[s("td",null,d(o.title),1),s("td",null,d(o.category),1),s("td",null,d(o.cost),1)]))),256))])])])]),y(h,{items:r.statisticsPurchases},null,8,["items"]),s("div",ht,[s("button",{onClick:e[3]||(e[3]=o=>l.setDataDays()),class:"btn btn-accent"},"Days"),s("button",{onClick:e[4]||(e[4]=o=>l.setDataWeeks()),class:"btn btn-accent mx-5"},"Weeks"),s("button",{onClick:e[5]||(e[5]=o=>l.setDataMonths()),class:"btn btn-accent"},"Months")]),y(i,{"chart-data":r.datacollection},null,8,["chart-data"])])}var gt=m(at,[["render",dt]]);const ft={components:{Chart:v,AllCostOfTable:_},props:{state:{type:Object}},data(){return{categoriesPurchases:[],datacollection:{}}},methods:{setCategoriesPurchases(t){this.categoriesPurchases=this.getCategoriesPurchases(t)},getCategoriesPurchases(t){let e=[];for(let a of this.state.purchases)a.category==t&&e.push(a);return e},setDataCategories(){this.datacollection={labels:this.state.categories,datasets:[{label:"Data One",backgroundColor:"#f87979",data:this.getAllCostOfEachCategory()}]}},getAllCostOfEachCategory(){let t=[];for(let e of this.state.categories){let a=this.getCategoriesPurchases(e),n=null;for(let r of a)n+=Number(r.cost);t.push(n)}return t}},created(){this.categoriesPurchases=this.getCategoriesPurchases(this.state.categories[0]),this.setDataCategories()}},pt={class:"mb-3"},bt={class:"flex mb-4"},mt={class:"mr-3",style:{"max-width":"250px"}},Dt={class:"menu p-3 shadow-lg bg-base-100 rounded-box"},yt=s("li",{class:"menu-title text-lg font-medium"},"Categories",-1),_t=["onClick"],Ct={class:"p-3 shadow-lg bg-base-100 rounded-box flex-grow"},vt={class:"overflow-x-auto mb-3"},xt={class:"table w-full table-compact"},Pt=s("thead",null,[s("tr",null,[s("th",null,"Title"),s("th",null,"Category"),s("th",null,"Price")])],-1);function Ot(t,e,a,n,r,l){const h=D("AllCostOfTable"),i=D("Chart");return u(),c("div",pt,[s("div",bt,[s("div",mt,[s("ul",Dt,[yt,(u(!0),c(f,null,b(a.state.categories,o=>(u(),c("li",{onClick:$t=>l.setCategoriesPurchases(o),class:""},d(o),9,_t))),256))])]),s("div",Ct,[s("div",vt,[s("table",xt,[Pt,s("tbody",null,[(u(!0),c(f,null,b(r.categoriesPurchases,o=>(u(),c("tr",null,[s("td",null,d(o.title),1),s("td",null,d(o.category),1),s("td",null,d(o.cost),1)]))),256))])])])])]),y(h,{items:r.categoriesPurchases},null,8,["items"]),y(i,{"chart-data":r.datacollection},null,8,["chart-data"])])}var wt=m(ft,[["render",Ot]]);const kt={components:{Purchases:Q,Statistics:gt,Categories:wt},data(){return{state:{purchases:[],categories:[],nextPurchaseId:0},currentDate:{year:null,month:null,day:null},currentTab:"Purchases",tabs:["Purchases","Statistics","Categories"]}},methods:{initApp(){this.setCurrentDate(),this.getDataFromLC("stateOfShoppingList")!==null&&(this.state=this.getDataFromLC("stateOfShoppingList"))},setCurrentDate(){let t=new Date;this.currentDate.year=t.getFullYear(),this.currentDate.month=t.getMonth(),this.currentDate.day=t.getDate()},getDataFromLC(t){let e=localStorage.getItem(t);return JSON.parse(e)}},mounted(){this.initApp()}},Tt={class:"container max-w-screen-lg mx-auto px-4 bg-base-200 shadow-lg rounded-box"},Nt={class:""},St=s("div",{class:"mb-4"},[s("h1",{class:"text-center text-4xl font-medium"},"Shopping List")],-1),Lt={class:"tabs tabs-boxed flex justify-center mb-5"},jt=["onClick"];function Mt(t,e,a,n,r,l){return u(),c("div",Tt,[s("div",Nt,[St,s("div",Lt,[(u(!0),c(f,null,b(r.tabs,h=>(u(),c("a",{class:N(["tab tab-lg",{"tab-active":r.currentTab===h}]),key:h,onClick:i=>r.currentTab=h},d(h),11,jt))),128))])]),(u(),k(T(r.currentTab),{state:r.state,currentDate:r.currentDate},null,8,["state","currentDate"]))])}var At=m(kt,[["render",Mt]]);S(At).mount("#app");
